<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1495px" preserveAspectRatio="none" style="width:655px;height:1495px;background:#AAAAFF;" version="1.1" viewBox="0 0 655 1495" width="655px" zoomAndPan="magnify"><defs><linearGradient id="gc714glrtupk70" x1="0%" x2="100%" y1="0%" y2="100%"><stop offset="0%" stop-color="#AAAAFF"/><stop offset="100%" stop-color="#FFFFFF"/></linearGradient><filter height="300%" id="fc714glrtupk7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter><linearGradient id="gc714glrtupk71" x1="0%" x2="100%" y1="0%" y2="100%"><stop offset="0%" stop-color="#FFFFFF"/><stop offset="100%" stop-color="#008000"/></linearGradient><linearGradient id="gc714glrtupk72" x1="0%" x2="100%" y1="0%" y2="100%"><stop offset="0%" stop-color="#FFFFFF"/><stop offset="100%" stop-color="#FF0000"/></linearGradient><linearGradient id="gc714glrtupk73" x1="0%" x2="100%" y1="0%" y2="100%"><stop offset="0%" stop-color="#FFFFFF"/><stop offset="100%" stop-color="#AAAAFF"/></linearGradient></defs><g><rect fill="url(#gc714glrtupk70)" height="1495" style="stroke:none;stroke-width:1.0;" width="655" x="0" y="0"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="354" x="149.75" y="26.708">Debounced button as LED ARM/DISARM</text><ellipse cx="374.5" cy="40.9531" fill="#000000" filter="url(#fc714glrtupk7)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="url(#gc714glrtupk70)" filter="url(#fc714glrtupk7)" height="389.0859" style="stroke:#000000;stroke-width:2.0;" width="417" x="11" y="60.9531"/><path d="M41,60.9531 L41,70.25 L31,80.25 L11,80.25 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="20" x="14" y="74.9482">init</text><path d="M43.5,90.25 L43.5,236.4453 A0,0 0 0 0 43.5,236.4453 L315.5,236.4453 A0,0 0 0 0 315.5,236.4453 L315.5,167.3477 L335.5,163.3477 L315.5,159.3477 L315.5,100.25 L305.5,90.25 L43.5,90.25 A0,0 0 0 0 43.5,90.25 " fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M305.5,90.25 L305.5,100.25 L315.5,100.25 L305.5,90.25 " fill="url(#gc714glrtupk71)" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="49.5" y="107.3169">const int buttonPin = 9;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="49.5" y="122.4497">const int ledPin = LED_BUILTIN;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="49.5" y="137.5825">//start with led OFF</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="49.5" y="152.7153">int ledState = LOW;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="49.5" y="167.8481">int buttonState;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="49.5" y="182.981">//unpressed is assumd</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="49.5" y="198.1138">int lastButtonState;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="49.5" y="213.2466">unsigned long lastDebounceTime = 0;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="49.5" y="228.3794">unsigned long debounceDelay = 50;</text><rect fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="78" x="335.5" y="146.3633"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="345.5" y="167.502">Variables</text><path d="M21,246.4453 L21,438.0391 A0,0 0 0 0 21,438.0391 L311,438.0391 A0,0 0 0 0 311,438.0391 L311,346.2422 L331,342.2422 L311,338.2422 L311,256.4453 L301,246.4453 L21,246.4453 A0,0 0 0 0 21,246.4453 " fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M301,246.4453 L301,256.4453 L311,256.4453 L301,246.4453 " fill="url(#gc714glrtupk71)" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="27" y="263.5122">void setup() {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="35" y="278.645">//default unpressed=HIGH</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="35" y="293.7778">pinMode(buttonPin, INPUT_PULLUP);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="35" y="308.9106">pinMode(ledPin, OUTPUT);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="35" y="324.0435">Serial.begin(115200);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="35" y="339.1763">digitalWrite(ledPin, ledState);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="261" x="35" y="354.3091">int buttonState = digitalRead(buttonPin);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="35" y="369.4419">lastButtonState=buttonState;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="35" y="384.5747">Serial.println("setup complete");</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="35" y="399.7075">Serial.print("Button is ");</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="35" y="414.8403">Serial.println(buttonState);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="27" y="429.9731">}</text><rect fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="87" x="331" y="325.2578"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="67" x="341" y="346.3965">Void setup</text><rect fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="247" x="251" y="514.0391"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="227" x="261" y="535.1777">int reading = digitalRead(buttonPin)</text><rect fill="url(#gc714glrtupk70)" filter="url(#fc714glrtupk7)" height="174.668" style="stroke:#000000;stroke-width:2.0;" width="461" x="42.5" y="558.0078"/><path d="M87.5,558.0078 L87.5,567.3047 L77.5,577.3047 L42.5,577.3047 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="45.5" y="572.0029">timer</text><path d="M62.5,647.125 L62.5,672.2578 A0,0 0 0 0 62.5,672.2578 L257.5,672.2578 A0,0 0 0 0 257.5,672.2578 L257.5,665.125 L277.5,659.6914 L257.5,657.125 L257.5,657.125 L247.5,647.125 L62.5,647.125 A0,0 0 0 0 62.5,647.125 " fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M247.5,647.125 L247.5,657.125 L257.5,657.125 L247.5,647.125 " fill="url(#gc714glrtupk71)" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="68.5" y="664.1919">reset the debouncing timer</text><rect fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="194" x="277.5" y="642.707"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="174" x="287.5" y="663.8457">lastDebounceTime = millis()</text><polygon fill="url(#gc714glrtupk72)" filter="url(#fc714glrtupk7)" points="294.5,594.3047,454.5,594.3047,466.5,606.3047,454.5,618.3047,294.5,618.3047,282.5,606.3047,294.5,594.3047" style="stroke:#A80036;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="23" x="378.5" y="628.5151">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="160" x="294.5" y="610.1128">if reading != lastbuttonstate</text><polygon fill="url(#gc714glrtupk72)" filter="url(#fc714glrtupk7)" points="374.5,696.6758,386.5,708.6758,374.5,720.6758,362.5,708.6758,374.5,696.6758" style="stroke:#A80036;stroke-width:0.0;"/><rect fill="url(#gc714glrtupk70)" filter="url(#fc714glrtupk7)" height="531.2734" style="stroke:#000000;stroke-width:2.0;" width="470" x="147.5" y="742.6758"/><path d="M233.5,742.6758 L233.5,751.9727 L223.5,761.9727 L147.5,761.9727 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="150.5" y="756.6709">debouncer</text><rect fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="162" x="293.5" y="875.7773"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="142" x="303.5" y="896.916">buttonState = reading</text><rect fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="179" x="285" y="929.7461"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="159" x="295" y="950.8848">Serial.println("transition")</text><rect fill="url(#gc714glrtupk70)" filter="url(#fc714glrtupk7)" height="200.2344" style="stroke:#000000;stroke-width:2.0;" width="396" x="177.5" y="973.7148"/><path d="M267.5,973.7148 L267.5,983.0117 L257.5,993.0117 L177.5,993.0117 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="180.5" y="987.71">debounced</text><polygon fill="url(#gc714glrtupk72)" filter="url(#fc714glrtupk7)" points="307,1010.0117,442,1010.0117,454,1022.0117,442,1034.0117,307,1034.0117,295,1022.0117,307,1010.0117" style="stroke:#A80036;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="135" x="307" y="1025.8198">if (buttonState == LOW)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="23" x="272" y="1019.4175">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="454" y="1019.4175">false</text><rect fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="117" x="220" y="1044.0117"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="97" x="230" y="1065.1504">ledState = LOW</text><rect fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="162" x="197.5" y="1097.9805"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="142" x="207.5" y="1119.1191">Serial.println("ARMED")</text><rect fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="182" x="379.5" y="1044.0117"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="162" x="389.5" y="1065.1504">Serial.println("DISARMED")</text><rect fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="121" x="410" y="1097.9805"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="420" y="1119.1191">ledState = HIGH</text><polygon fill="url(#gc714glrtupk72)" filter="url(#fc714glrtupk7)" points="374.5,1137.9492,386.5,1149.9492,374.5,1161.9492,362.5,1149.9492,374.5,1137.9492" style="stroke:#A80036;stroke-width:0.0;"/><polygon fill="url(#gc714glrtupk72)" filter="url(#fc714glrtupk7)" points="300.5,827.375,448.5,827.375,460.5,839.375,448.5,851.375,300.5,851.375,288.5,839.375,300.5,827.375" style="stroke:#A80036;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="23" x="378.5" y="861.5854">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="148" x="300.5" y="843.1831">if (reading != buttonState)</text><polygon fill="url(#gc714glrtupk72)" filter="url(#fc714glrtupk7)" points="374.5,1193.9492,386.5,1205.9492,374.5,1217.9492,362.5,1205.9492,374.5,1193.9492" style="stroke:#A80036;stroke-width:0.0;"/><polygon fill="url(#gc714glrtupk72)" filter="url(#fc714glrtupk7)" points="232,778.9727,517,778.9727,529,790.9727,517,802.9727,232,802.9727,220,790.9727,232,778.9727" style="stroke:#A80036;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="23" x="378.5" y="813.1831">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="285" x="232" y="794.7808">if ((millis() - lastDebounceTime) &gt; debounceDelay)</text><polygon fill="url(#gc714glrtupk72)" filter="url(#fc714glrtupk7)" points="374.5,1237.9492,386.5,1249.9492,374.5,1261.9492,362.5,1249.9492,374.5,1237.9492" style="stroke:#A80036;stroke-width:0.0;"/><path d="M31,1298.3672 L31,1323.5 A0,0 0 0 0 31,1323.5 L255,1323.5 A0,0 0 0 0 255,1323.5 L255,1316.3672 L275,1310.9336 L255,1308.3672 L255,1308.3672 L245,1298.3672 L31,1298.3672 A0,0 0 0 0 31,1298.3672 " fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M245,1298.3672 L245,1308.3672 L255,1308.3672 L245,1298.3672 " fill="url(#gc714glrtupk71)" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="37" y="1315.4341">Set LED to the state in ledState</text><rect fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="199" x="275" y="1293.9492"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="179" x="285" y="1315.0879">digitalWrite(ledPin, ledState)</text><rect fill="url(#gc714glrtupk71)" filter="url(#fc714glrtupk7)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="185" x="282" y="1347.918"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="165" x="292" y="1369.0566">lastButtonState = reading</text><polygon fill="url(#gc714glrtupk72)" filter="url(#fc714glrtupk7)" points="374.5,470.0391,386.5,482.0391,374.5,494.0391,362.5,482.0391,374.5,470.0391" style="stroke:#A80036;stroke-width:0.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="180.332" y2="325.2578"/><polygon fill="#000000" points="370.5,315.2578,374.5,325.2578,378.5,315.2578,374.5,319.2578" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="50.9531" y2="146.3633"/><polygon fill="#000000" points="370.5,136.3633,374.5,146.3633,378.5,136.3633,374.5,140.3633" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="618.3047" y2="642.707"/><polygon fill="#000000" points="370.5,632.707,374.5,642.707,378.5,632.707,374.5,636.707" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="466.5" x2="481.5" y1="606.3047" y2="606.3047"/><polygon fill="#000000" points="477.5,649.6914,481.5,659.6914,485.5,649.6914,481.5,653.6914" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="481.5" x2="481.5" y1="606.3047" y2="708.6758"/><line style="stroke:#000000;stroke-width:1.5;" x1="481.5" x2="386.5" y1="708.6758" y2="708.6758"/><polygon fill="#000000" points="396.5,704.6758,386.5,708.6758,396.5,712.6758,392.5,708.6758" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="676.6758" y2="696.6758"/><polygon fill="#000000" points="370.5,686.6758,374.5,696.6758,378.5,686.6758,374.5,690.6758" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="548.0078" y2="594.3047"/><polygon fill="#000000" points="370.5,584.3047,374.5,594.3047,378.5,584.3047,374.5,588.3047" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="909.7461" y2="929.7461"/><polygon fill="#000000" points="370.5,919.7461,374.5,929.7461,378.5,919.7461,374.5,923.7461" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="278.5" x2="278.5" y1="1077.9805" y2="1097.9805"/><polygon fill="#000000" points="274.5,1087.9805,278.5,1097.9805,282.5,1087.9805,278.5,1091.9805" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="470.5" x2="470.5" y1="1077.9805" y2="1097.9805"/><polygon fill="#000000" points="466.5,1087.9805,470.5,1097.9805,474.5,1087.9805,470.5,1091.9805" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="295" x2="278.5" y1="1022.0117" y2="1022.0117"/><line style="stroke:#000000;stroke-width:1.5;" x1="278.5" x2="278.5" y1="1022.0117" y2="1044.0117"/><polygon fill="#000000" points="274.5,1034.0117,278.5,1044.0117,282.5,1034.0117,278.5,1038.0117" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="454" x2="470.5" y1="1022.0117" y2="1022.0117"/><line style="stroke:#000000;stroke-width:1.5;" x1="470.5" x2="470.5" y1="1022.0117" y2="1044.0117"/><polygon fill="#000000" points="466.5,1034.0117,470.5,1044.0117,474.5,1034.0117,470.5,1038.0117" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="278.5" x2="278.5" y1="1131.9492" y2="1149.9492"/><line style="stroke:#000000;stroke-width:1.5;" x1="278.5" x2="362.5" y1="1149.9492" y2="1149.9492"/><polygon fill="#000000" points="352.5,1145.9492,362.5,1149.9492,352.5,1153.9492,356.5,1149.9492" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="470.5" x2="470.5" y1="1131.9492" y2="1149.9492"/><line style="stroke:#000000;stroke-width:1.5;" x1="470.5" x2="386.5" y1="1149.9492" y2="1149.9492"/><polygon fill="#000000" points="396.5,1145.9492,386.5,1149.9492,396.5,1153.9492,392.5,1149.9492" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="963.7148" y2="1010.0117"/><polygon fill="#000000" points="370.5,1000.0117,374.5,1010.0117,378.5,1000.0117,374.5,1004.0117" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="851.375" y2="875.7773"/><polygon fill="#000000" points="370.5,865.7773,374.5,875.7773,378.5,865.7773,374.5,869.7773" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="460.5" x2="583.5" y1="839.375" y2="839.375"/><polygon fill="#000000" points="579.5,1006.3633,583.5,1016.3633,587.5,1006.3633,583.5,1010.3633" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="583.5" x2="583.5" y1="839.375" y2="1205.9492"/><line style="stroke:#000000;stroke-width:1.5;" x1="583.5" x2="386.5" y1="1205.9492" y2="1205.9492"/><polygon fill="#000000" points="396.5,1201.9492,386.5,1205.9492,396.5,1209.9492,392.5,1205.9492" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="1161.9492" y2="1193.9492"/><polygon fill="#000000" points="370.5,1183.9492,374.5,1193.9492,378.5,1183.9492,374.5,1187.9492" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="802.9727" y2="827.375"/><polygon fill="#000000" points="370.5,817.375,374.5,827.375,378.5,817.375,374.5,821.375" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="529" x2="601.5" y1="790.9727" y2="790.9727"/><polygon fill="#000000" points="597.5,1006.3633,601.5,1016.3633,605.5,1006.3633,601.5,1010.3633" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="601.5" x2="601.5" y1="790.9727" y2="1249.9492"/><line style="stroke:#000000;stroke-width:1.5;" x1="601.5" x2="386.5" y1="1249.9492" y2="1249.9492"/><polygon fill="#000000" points="396.5,1245.9492,386.5,1249.9492,396.5,1253.9492,392.5,1249.9492" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="1217.9492" y2="1237.9492"/><polygon fill="#000000" points="370.5,1227.9492,374.5,1237.9492,378.5,1227.9492,374.5,1231.9492" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="720.6758" y2="778.9727"/><polygon fill="#000000" points="370.5,768.9727,374.5,778.9727,378.5,768.9727,374.5,772.9727" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="1261.9492" y2="1293.9492"/><polygon fill="#000000" points="370.5,1283.9492,374.5,1293.9492,378.5,1283.9492,374.5,1287.9492" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="1327.918" y2="1347.918"/><polygon fill="#000000" points="370.5,1337.918,374.5,1347.918,378.5,1337.918,374.5,1341.918" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="494.0391" y2="514.0391"/><polygon fill="#000000" points="370.5,504.0391,374.5,514.0391,378.5,504.0391,374.5,508.0391" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="1381.8867" y2="1429.8867"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="629.5" y1="1429.8867" y2="1429.8867"/><polygon fill="#000000" points="625.5,960.6641,629.5,950.6641,633.5,960.6641,629.5,956.6641" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="629.5" x2="629.5" y1="482.0391" y2="1429.8867"/><line style="stroke:#000000;stroke-width:1.5;" x1="629.5" x2="386.5" y1="482.0391" y2="482.0391"/><polygon fill="#000000" points="396.5,478.0391,386.5,482.0391,396.5,486.0391,392.5,482.0391" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="374.5" x2="374.5" y1="359.2266" y2="470.0391"/><polygon fill="#000000" points="370.5,460.0391,374.5,470.0391,378.5,460.0391,374.5,464.0391" style="stroke:#000000;stroke-width:1.0;"/><rect fill="url(#gc714glrtupk73)" height="26.2969" rx="5" ry="5" style="stroke:url(#gc714glrtupk73);stroke-width:0.0;" width="358" x="147.25" y="1437.8867"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="346" x="153.25" y="1455.8818">Debounced button in main loop (armed/disarmed)</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="200" x="226.75" y="1482.4658">(C)2022 Sean Donnellan, Fynn Donnellan</text><!--MD5=[0e5834b67c2b036822c7c4baaa3d7d73]
@startuml
title Debounced button as LED ARM/DISARM
footer (C)2022 Sean Donnellan, Fynn Donnellan

skinparam activity {
  StartColor black
  BarColor black/blue
  EndColor black
  BackgroundColor #fff/green
  DiamondBackgroundColor #fff/red
  BorderColor black
  BorderThickness 0
}
skinparam note {
  BackgroundColor #fff/green
}
skinparam ArrowColor black
skinparam BackgroundColor #aaf/fff
skinparam legendBackgroundColor #fff/aaf
skinparam LegendBorderThickness 0
skinparam PartitionBackgroundColor #aaf/fff

start
  partition init {
    :Variables;
    note left
      const int buttonPin = 9;    
      const int ledPin = LED_BUILTIN;    
      //start with led OFF  
      int ledState = LOW;        
      int buttonState; 
      //unpressed is assumd            
      int lastButtonState;   
      unsigned long lastDebounceTime = 0;  
      unsigned long debounceDelay = 50; 
    end note
    :Void setup;
    note left
      void setup() {
        //default unpressed=HIGH
        pinMode(buttonPin, INPUT_PULLUP);
        pinMode(ledPin, OUTPUT);
        Serial.begin(115200);
        digitalWrite(ledPin, ledState);
        int buttonState = digitalRead(buttonPin);
        lastButtonState=buttonState;
        Serial.println("setup complete");
        Serial.print("Button is ");
        Serial.println(buttonState);
      }
    end note
  }
	repeat
	  :int reading = digitalRead(buttonPin);
    partition timer {
      if (if reading != lastbuttonstate) then (true)
	    :lastDebounceTime = millis();
      note left
        reset the debouncing timer
      end note
      endif
    }
    partition debouncer {
      if (if ((millis() - lastDebounceTime) > debounceDelay)) then (true)
        if (if (reading != buttonState)) then (true)
          :buttonState = reading;
          :Serial.println("transition");
	        partition debounced {
          	if (if (buttonState == LOW)) then (true)
            	:ledState = LOW;
              :Serial.println("ARMED");
            else (false)
              :Serial.println("DISARMED");
              :ledState = HIGH;
          	endif
	        }
        endif
      endif
    }
    :digitalWrite(ledPin, ledState);
    note left
    	Set LED to the state in ledState
    end note
    :lastButtonState = reading;
 

legend
Debounced button in main loop (armed/disarmed)
end legend



@enduml

PlantUML version 1.2022.0(Tue Jan 11 16:16:42 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>