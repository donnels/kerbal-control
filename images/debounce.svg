<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1234px" preserveAspectRatio="none" style="width:682px;height:1234px;background:#AAAAFF;" version="1.1" viewBox="0 0 682 1234" width="682px" zoomAndPan="magnify"><defs><linearGradient id="g15bg5kth50o920" x1="0%" x2="100%" y1="0%" y2="100%"><stop offset="0%" stop-color="#AAAAFF"/><stop offset="100%" stop-color="#FFFFFF"/></linearGradient><filter height="300%" id="f15bg5kth50o92" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter><linearGradient id="g15bg5kth50o921" x1="0%" x2="100%" y1="0%" y2="100%"><stop offset="0%" stop-color="#FFFFFF"/><stop offset="100%" stop-color="#008000"/></linearGradient><linearGradient id="g15bg5kth50o922" x1="0%" x2="100%" y1="0%" y2="100%"><stop offset="0%" stop-color="#FFFFFF"/><stop offset="100%" stop-color="#FF0000"/></linearGradient><linearGradient id="g15bg5kth50o923" x1="0%" x2="100%" y1="0%" y2="100%"><stop offset="0%" stop-color="#FFFFFF"/><stop offset="100%" stop-color="#AAAAFF"/></linearGradient></defs><g><rect fill="url(#g15bg5kth50o920)" height="1234" style="stroke:none;stroke-width:1.0;" width="682" x="0" y="0"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="291" x="194.5" y="26.708">Debounced button as LED toggle</text><ellipse cx="461.5" cy="40.9531" fill="#000000" filter="url(#f15bg5kth50o92)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="url(#g15bg5kth50o920)" filter="url(#f15bg5kth50o92)" height="252.8906" style="stroke:#000000;stroke-width:2.0;" width="386.5" x="128.5" y="60.9531"/><path d="M158.5,60.9531 L158.5,70.25 L148.5,80.25 L128.5,80.25 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="20" x="131.5" y="74.9482">init</text><path d="M138.5,90.25 L138.5,206.1797 A0,0 0 0 0 138.5,206.1797 L402.5,206.1797 A0,0 0 0 0 402.5,206.1797 L402.5,152.2148 L422.5,148.2148 L402.5,144.2148 L402.5,100.25 L392.5,90.25 L138.5,90.25 A0,0 0 0 0 138.5,90.25 " fill="url(#g15bg5kth50o921)" filter="url(#f15bg5kth50o92)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M392.5,90.25 L392.5,100.25 L402.5,100.25 L392.5,90.25 " fill="url(#g15bg5kth50o921)" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="144.5" y="107.3169">const int buttonPin = 2;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="144.5" y="122.4497">const int ledPin = 13;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="144.5" y="137.5825">int ledState = HIGH;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="144.5" y="152.7153">int buttonState;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="144.5" y="167.8481">int lastButtonState = LOW;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="144.5" y="182.981">unsigned long lastDebounceTime = 0;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="144.5" y="198.1138">unsigned long debounceDelay = 50;</text><rect fill="url(#g15bg5kth50o921)" filter="url(#f15bg5kth50o92)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="78" x="422.5" y="131.2305"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="432.5" y="152.3691">Variables</text><path d="M185,216.1797 L185,301.8438 A0,0 0 0 0 185,301.8438 L398,301.8438 A0,0 0 0 0 398,301.8438 L398,263.0117 L418,259.0117 L398,255.0117 L398,226.1797 L388,216.1797 L185,216.1797 A0,0 0 0 0 185,216.1797 " fill="url(#g15bg5kth50o921)" filter="url(#f15bg5kth50o92)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M388,216.1797 L388,226.1797 L398,226.1797 L388,216.1797 " fill="url(#g15bg5kth50o921)" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="191" y="233.2466">void setup() {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="199" y="248.3794">pinMode(buttonPin, INPUT);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="199" y="263.5122">pinMode(ledPin, OUTPUT);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="199" y="278.645">digitalWrite(ledPin, ledState);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="191" y="293.7778">}</text><rect fill="url(#g15bg5kth50o921)" filter="url(#f15bg5kth50o92)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="87" x="418" y="242.0273"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="67" x="428" y="263.166">Void setup</text><rect fill="url(#g15bg5kth50o921)" filter="url(#f15bg5kth50o92)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="247" x="338" y="377.8438"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="227" x="348" y="398.9824">int reading = digitalRead(buttonPin)</text><rect fill="url(#g15bg5kth50o920)" filter="url(#f15bg5kth50o92)" height="170.2656" style="stroke:#000000;stroke-width:2.0;" width="461" x="129.5" y="421.8125"/><path d="M174.5,421.8125 L174.5,431.1094 L164.5,441.1094 L129.5,441.1094 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="132.5" y="435.8076">timer</text><path d="M149.5,506.5273 L149.5,531.6602 A0,0 0 0 0 149.5,531.6602 L344.5,531.6602 A0,0 0 0 0 344.5,531.6602 L344.5,524.5273 L364.5,519.0938 L344.5,516.5273 L344.5,516.5273 L334.5,506.5273 L149.5,506.5273 A0,0 0 0 0 149.5,506.5273 " fill="url(#g15bg5kth50o921)" filter="url(#f15bg5kth50o92)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M334.5,506.5273 L334.5,516.5273 L344.5,516.5273 L334.5,506.5273 " fill="url(#g15bg5kth50o921)" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="155.5" y="523.5942">reset the debouncing timer</text><rect fill="url(#g15bg5kth50o921)" filter="url(#f15bg5kth50o92)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="194" x="364.5" y="502.1094"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="174" x="374.5" y="523.248">lastDebounceTime = millis()</text><polygon fill="url(#g15bg5kth50o922)" filter="url(#f15bg5kth50o92)" points="381.5,458.1094,541.5,458.1094,553.5,470.1094,541.5,482.1094,381.5,482.1094,369.5,470.1094,381.5,458.1094" style="stroke:#A80036;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="160" x="381.5" y="473.9175">if reading != lastbuttonstate</text><polygon fill="url(#g15bg5kth50o922)" filter="url(#f15bg5kth50o92)" points="461.5,556.0781,473.5,568.0781,461.5,580.0781,449.5,568.0781,461.5,556.0781" style="stroke:#A80036;stroke-width:0.0;"/><rect fill="url(#g15bg5kth50o920)" filter="url(#f15bg5kth50o92)" height="410.5313" style="stroke:#000000;stroke-width:2.0;" width="633" x="11" y="602.0781"/><path d="M97,602.0781 L97,611.375 L87,621.375 L11,621.375 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="14" y="616.0732">debouncer</text><rect fill="url(#g15bg5kth50o921)" filter="url(#f15bg5kth50o92)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="162" x="380.5" y="726.375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="142" x="390.5" y="747.5137">buttonState = reading</text><path d="M23,828.3438 L23,868.6094 A0,0 0 0 0 23,868.6094 L367,868.6094 A0,0 0 0 0 367,868.6094 L367,852.4766 L387,848.4766 L367,844.4766 L367,838.3438 L357,828.3438 L23,828.3438 A0,0 0 0 0 23,828.3438 " fill="url(#g15bg5kth50o921)" filter="url(#f15bg5kth50o92)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M357,828.3438 L357,838.3438 L367,838.3438 L357,828.3438 " fill="url(#g15bg5kth50o921)" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="29" y="845.4106">This is a toggle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="323" x="29" y="860.5435">only toggle the LED if the new button state is HIGH</text><rect fill="url(#g15bg5kth50o921)" filter="url(#f15bg5kth50o92)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="149" x="387" y="831.4922"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="129" x="397" y="852.6309">ledState = !ledState</text><polygon fill="url(#g15bg5kth50o922)" filter="url(#f15bg5kth50o92)" points="392,780.3438,531,780.3438,543,792.3438,531,804.3438,392,804.3438,380,792.3438,392,780.3438" style="stroke:#A80036;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="139" x="392" y="796.1519">if (buttonState == HIGH)</text><polygon fill="url(#g15bg5kth50o922)" filter="url(#f15bg5kth50o92)" points="461.5,888.6094,473.5,900.6094,461.5,912.6094,449.5,900.6094,461.5,888.6094" style="stroke:#A80036;stroke-width:0.0;"/><polygon fill="url(#g15bg5kth50o922)" filter="url(#f15bg5kth50o92)" points="387.5,682.375,535.5,682.375,547.5,694.375,535.5,706.375,387.5,706.375,375.5,694.375,387.5,682.375" style="stroke:#A80036;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="148" x="387.5" y="698.1831">if (reading != buttonState)</text><polygon fill="url(#g15bg5kth50o922)" filter="url(#f15bg5kth50o92)" points="461.5,932.6094,473.5,944.6094,461.5,956.6094,449.5,944.6094,461.5,932.6094" style="stroke:#A80036;stroke-width:0.0;"/><polygon fill="url(#g15bg5kth50o922)" filter="url(#f15bg5kth50o92)" points="319,638.375,604,638.375,616,650.375,604,662.375,319,662.375,307,650.375,319,638.375" style="stroke:#A80036;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="285" x="319" y="654.1831">if ((millis() - lastDebounceTime) &gt; debounceDelay)</text><polygon fill="url(#g15bg5kth50o922)" filter="url(#f15bg5kth50o92)" points="461.5,976.6094,473.5,988.6094,461.5,1000.6094,449.5,988.6094,461.5,976.6094" style="stroke:#A80036;stroke-width:0.0;"/><rect fill="url(#g15bg5kth50o921)" filter="url(#f15bg5kth50o92)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="199" x="362" y="1032.6094"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="179" x="372" y="1053.748">digitalWrite(ledPin, ledState)</text><rect fill="url(#g15bg5kth50o921)" filter="url(#f15bg5kth50o92)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:0.0;" width="185" x="369" y="1086.5781"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="165" x="379" y="1107.7168">lastButtonState = reading</text><polygon fill="url(#g15bg5kth50o922)" filter="url(#f15bg5kth50o92)" points="461.5,333.8438,473.5,345.8438,461.5,357.8438,449.5,345.8438,461.5,333.8438" style="stroke:#A80036;stroke-width:0.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="165.1992" y2="242.0273"/><polygon fill="#000000" points="457.5,232.0273,461.5,242.0273,465.5,232.0273,461.5,236.0273" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="50.9531" y2="131.2305"/><polygon fill="#000000" points="457.5,121.2305,461.5,131.2305,465.5,121.2305,461.5,125.2305" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="482.1094" y2="502.1094"/><polygon fill="#000000" points="457.5,492.1094,461.5,502.1094,465.5,492.1094,461.5,496.1094" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="553.5" x2="568.5" y1="470.1094" y2="470.1094"/><polygon fill="#000000" points="564.5,509.0938,568.5,519.0938,572.5,509.0938,568.5,513.0938" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="568.5" x2="568.5" y1="470.1094" y2="568.0781"/><line style="stroke:#000000;stroke-width:1.5;" x1="568.5" x2="473.5" y1="568.0781" y2="568.0781"/><polygon fill="#000000" points="483.5,564.0781,473.5,568.0781,483.5,572.0781,479.5,568.0781" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="536.0781" y2="556.0781"/><polygon fill="#000000" points="457.5,546.0781,461.5,556.0781,465.5,546.0781,461.5,550.0781" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="411.8125" y2="458.1094"/><polygon fill="#000000" points="457.5,448.1094,461.5,458.1094,465.5,448.1094,461.5,452.1094" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="804.3438" y2="831.4922"/><polygon fill="#000000" points="457.5,821.4922,461.5,831.4922,465.5,821.4922,461.5,825.4922" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="543" x2="555" y1="792.3438" y2="792.3438"/><polygon fill="#000000" points="551,838.4766,555,848.4766,559,838.4766,555,842.4766" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="555" x2="555" y1="792.3438" y2="900.6094"/><line style="stroke:#000000;stroke-width:1.5;" x1="555" x2="473.5" y1="900.6094" y2="900.6094"/><polygon fill="#000000" points="483.5,896.6094,473.5,900.6094,483.5,904.6094,479.5,900.6094" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="865.4609" y2="888.6094"/><polygon fill="#000000" points="457.5,878.6094,461.5,888.6094,465.5,878.6094,461.5,882.6094" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="760.3438" y2="780.3438"/><polygon fill="#000000" points="457.5,770.3438,461.5,780.3438,465.5,770.3438,461.5,774.3438" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="706.375" y2="726.375"/><polygon fill="#000000" points="457.5,716.375,461.5,726.375,465.5,716.375,461.5,720.375" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="547.5" x2="568" y1="694.375" y2="694.375"/><polygon fill="#000000" points="564,803.9922,568,813.9922,572,803.9922,568,807.9922" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="568" x2="568" y1="694.375" y2="944.6094"/><line style="stroke:#000000;stroke-width:1.5;" x1="568" x2="473.5" y1="944.6094" y2="944.6094"/><polygon fill="#000000" points="483.5,940.6094,473.5,944.6094,483.5,948.6094,479.5,944.6094" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="912.6094" y2="932.6094"/><polygon fill="#000000" points="457.5,922.6094,461.5,932.6094,465.5,922.6094,461.5,926.6094" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="662.375" y2="682.375"/><polygon fill="#000000" points="457.5,672.375,461.5,682.375,465.5,672.375,461.5,676.375" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="616" x2="628" y1="650.375" y2="650.375"/><polygon fill="#000000" points="624,803.9922,628,813.9922,632,803.9922,628,807.9922" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="628" x2="628" y1="650.375" y2="988.6094"/><line style="stroke:#000000;stroke-width:1.5;" x1="628" x2="473.5" y1="988.6094" y2="988.6094"/><polygon fill="#000000" points="483.5,984.6094,473.5,988.6094,483.5,992.6094,479.5,988.6094" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="956.6094" y2="976.6094"/><polygon fill="#000000" points="457.5,966.6094,461.5,976.6094,465.5,966.6094,461.5,970.6094" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="580.0781" y2="638.375"/><polygon fill="#000000" points="457.5,628.375,461.5,638.375,465.5,628.375,461.5,632.375" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="1000.6094" y2="1032.6094"/><polygon fill="#000000" points="457.5,1022.6094,461.5,1032.6094,465.5,1022.6094,461.5,1026.6094" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="1066.5781" y2="1086.5781"/><polygon fill="#000000" points="457.5,1076.5781,461.5,1086.5781,465.5,1076.5781,461.5,1080.5781" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="357.8438" y2="377.8438"/><polygon fill="#000000" points="457.5,367.8438,461.5,377.8438,465.5,367.8438,461.5,371.8438" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="1120.5469" y2="1168.5469"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="656" y1="1168.5469" y2="1168.5469"/><polygon fill="#000000" points="652,748.6953,656,738.6953,660,748.6953,656,744.6953" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="656" x2="656" y1="345.8438" y2="1168.5469"/><line style="stroke:#000000;stroke-width:1.5;" x1="656" x2="473.5" y1="345.8438" y2="345.8438"/><polygon fill="#000000" points="483.5,341.8438,473.5,345.8438,483.5,349.8438,479.5,345.8438" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="461.5" x2="461.5" y1="275.9961" y2="333.8438"/><polygon fill="#000000" points="457.5,323.8438,461.5,333.8438,465.5,323.8438,461.5,327.8438" style="stroke:#000000;stroke-width:1.0;"/><rect fill="url(#g15bg5kth50o923)" height="26.2969" rx="5" ry="5" style="stroke:url(#g15bg5kth50o923);stroke-width:0.0;" width="358" x="160.5" y="1176.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="346" x="166.5" y="1194.542">Debounced button in main loop (armed/disarmed)</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="200" x="240" y="1221.126">(C)2022 Sean Donnellan, Fynn Donnellan</text><!--MD5=[c4fe68bf31137506a9d33164a760f482]
@startuml
title Debounced button as LED toggle
footer (C)2022 Sean Donnellan, Fynn Donnellan

skinparam activity {
  StartColor black
  BarColor black/blue
  EndColor black
  BackgroundColor #fff/green
  DiamondBackgroundColor #fff/red
  BorderColor black
  BorderThickness 0
}
skinparam note {
  BackgroundColor #fff/green
}
skinparam ArrowColor black
skinparam BackgroundColor #aaf/fff
skinparam legendBackgroundColor #fff/aaf
skinparam LegendBorderThickness 0
skinparam PartitionBackgroundColor #aaf/fff

start
  partition init {
    :Variables;
    note left
      const int buttonPin = 2;
      const int ledPin = 13;
      int ledState = HIGH;
      int buttonState;
      int lastButtonState = LOW;
      unsigned long lastDebounceTime = 0;
      unsigned long debounceDelay = 50;
    end note
    :Void setup;
    note left
      void setup() {
        pinMode(buttonPin, INPUT);
        pinMode(ledPin, OUTPUT);
        digitalWrite(ledPin, ledState);
      }
    end note
  }
	repeat
	  :int reading = digitalRead(buttonPin);
    partition timer {
      if (if reading != lastbuttonstate)
	    :lastDebounceTime = millis();
      note left
        reset the debouncing timer
      end note
      endif
    }
    partition debouncer {
      if (if ((millis() - lastDebounceTime) > debounceDelay))
        if (if (reading != buttonState))
          :buttonState = reading;
          if (if (buttonState == HIGH))
            :ledState = !ledState;
            note left
              This is a toggle
              only toggle the LED if the new button state is HIGH
            end note
          endif
        endif
      endif
    }
    :digitalWrite(ledPin, ledState);
    :lastButtonState = reading;
 

legend
Debounced button in main loop (armed/disarmed)
end legend



@enduml

PlantUML version 1.2022.0(Tue Jan 11 16:16:42 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>